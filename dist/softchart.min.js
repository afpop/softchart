!function(){"use strict";function e(e,t){return{restrict:"E",replace:!0,scope:{id:"=",setup:"=",dataset:"=",label:"="},templateUrl:"softchart.html",link:function(e,a,s){function l(){d||p.destroy();var t=document.getElementById(e.id).getContext("2d");p=new Chart(t,{type:e.setup.type,data:{labels:e.label,datasets:e.dataset},options:{onClick:n,scales:{responsive:!0,xAxes:[{display:e.setup.axes.x,stacked:e.setup.stackX,ticks:{autoSkip:!1}}],yAxes:[{display:e.setup.axes.y,stacked:e.setup.stackY,ticks:{max:e.setup.maxY?e.setup.maxY:void 0,beginAtZero:!0,callback:function(e,t,a){return u(e)}}}]},plugins:{datalabels:{display:e.setup.showLabel.enabled,formatter:u,color:"black",anchor:"center"}},tooltips:{callbacks:{label:function(t,a){return"pie"==e.setup.type?a.datasets[t.datasetIndex].label+": "+u(a.datasets[0].data[t.index]):a.datasets[t.datasetIndex].label+": "+u(t.yLabel)}}},legend:{display:e.setup.legend.enabled}}}),d=!1}function n(t,a){e.setup.callback&&a.length>0&&e.setup.callback({index:a[0]._index,label:a[0]._model.label,labelIndex:e.label[a[0]._index]})}function u(t,a){if("%"===e.setup.showLabel.type)return Math.round(t)+"%";if("H"===e.setup.showLabel.type){if(t<=0)return"";var s=Math.floor(t),l=Math.round(60*t%60,-1);return l>=60&&(l=0,s++),s=s<10?"0"+s:s,l=l<10?"0"+l:l,s+":"+l}return t}var p,d=!0;e.setup?(e.setup.type||(e.setup.type="bar"),!0!==e.setup.stackX&&(e.setup.stackX=!1),!0!==e.setup.stackY&&(e.setup.stackY=!1),e.setup.showLabel||(e.setup.showLabel={},e.setup.showLabel.enabled=!1),e.setup.axes||(e.setup.axes={x:!0,y:!0}),e.setup.legend||(e.setup.legend={enabled:!0})):(e.setup={},e.setup.type="bar",e.setup.showLabel={},e.setup.showLabel.enabled=!1,e.setup.axes={x:!0,y:!0},e.setup.legend={enabled:!0}),t(l,200),e.$watch("dataset",function(){d||l()})}}}angular.module("softchart.directive",[]).directive("softchart",e),e.$injector=["$filter","$timeout"]}(),angular.module("softchart.directive").run(["$templateCache",function(e){e.put("softchart.html",'\n<div class="softchart">\n\n    <canvas ng-attr-id="{{::id}}"></canvas>\n\n</div>\n')}]);